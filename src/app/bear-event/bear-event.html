<div class="bear-event-container">
  <header class="page-header">
    <h1 class="page-title">Bear 1 (20:00 UTC)</h1>
  </header>

  <app-rules [rules]="rules" />

  <form (submit)="generateFormations()" class="formation-generator-form">
    <h2 class="section-title">Generator Settings</h2>

    <div class="form-grid">
      <div class="form-field">
        <label for="infantry">Infantry Troops</label>
        <input id="infantry" type="number" [(ngModel)]="infantry" name="infantry" placeholder="e.g., 1200000" />
        <p class="tooltip">Total number of infantry you can send.</p>
      </div>

      <div class="form-field">
        <label for="cavalry">Cavalry Troops</label>
        <input id="cavalry" type="number" [(ngModel)]="cavalry" name="cavalry" placeholder="e.g., 800000" />
        <p class="tooltip">Total number of cavalry you can send.</p>
      </div>

      <div class="form-field">
        <label for="archers">Archer Troops</label>
        <input id="archers" type="number" [(ngModel)]="archers" name="archers" placeholder="e.g., 1500000" />
        <p class="tooltip">Total number of archers you can send.</p>
      </div>

      <div class="form-field">
        <label for="numMarches">Available Marches</label>
        <input id="numMarches" type="number" [(ngModel)]="numMarches" name="numMarches" placeholder="e.g., 5" />
        <p class="tooltip">How many marches can you send at once?</p>
      </div>

      <div class="form-field">
        <label for="damageRatio">Damage vs. Average</label>
        <input id="damageRatio" type="number" step="0.1" [(ngModel)]="damageRatio" name="damageRatio" placeholder="e.g., 4.0" />
        <p class="tooltip">Your rally damage versus an average rally. Most users should keep this number as 1. Change this only if your rally is doing a lot more damage compared to others (e.g. x5 more), then change this to e.g. 5.</p>      </div>

      <div class="form-field-checkbox">
        <input id="hasAmadeus" type="checkbox" [(ngModel)]="hasAmadeus" name="hasAmadeus" />
        <label for="hasAmadeus">Amadeus Hero Available</label>
      </div>
    </div>

    <button type="submit" class="generate-button">Generate Formations</button>
  </form>

  @if (computedResult()?.length) {
    <section class="results-section">
      <h2 class="section-title">Generated Formations</h2>
      <div class="results-grid">
        @for (formation of computedResult(); track formation.name) {
          <div class="formation-card">
            <h4>{{ formation.name }}</h4>
            <p><strong>Infantry:</strong> {{ formation.infantry | number }}</p>
            <p><strong>Cavalry:</strong> {{ formation.cavalry | number }}</p>
            <p><strong>Archers:</strong> {{ formation.archers | number }}</p>
          </div>
        }
      </div>
    </section>
  }
</div>
