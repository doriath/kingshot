
<div class="container">
  <h1>Troop Screenshot Analyzer</h1>
  <p>Upload a screenshot of your troops to get a breakdown of your army composition.</p>

  <div class="upload-section">
    <input type="file" (change)="onFileSelected($event)" accept="image/*" />
    <button (click)="analyzeImage()" [disabled]="!selectedFile() || isLoading()">
      {{ isLoading() ? 'Analyzing...' : 'Analyze' }}
    </button>
  </div>

  @if (isLoading()) {
    <div class="loading-indicator">
      <p>Analyzing image... this may take a moment.</p>
    </div>
  }

  @if (analysisResult(); as result) {
    <div class="result-section">
      <h2>Analysis Results</h2>
      <table>
        <thead>
          <tr>
            <th>Troop Name</th>
            <th>Tier</th>
            <th>Quantity</th>
          </tr>
        </thead>
        <tbody>
          @for (troop of result.troops; track troop.name) {
            <tr>
              <td>{{ troop.name }}</td>
              <td>{{ troop.tier }}</td>
              <td>{{ troop.quantity }}</td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }
</div>
